<!-- NAVBAR PRINCIPAL -->
<nav class="navbar navbar-expand-lg bg-body-tertiary shadow-sm" th:fragment="navbarPrincipal">
    <div class="container-fluid justify-content-between">
        <a class="navbar-brand fw-semibold" th:href="@{/}"> ‚úåÔ∏èiStore </a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarScroll"
            aria-controls="navbarScroll" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse justify-content-between" id="navbarScroll">
            <div class="w-25"></div>

            <form class="d-flex w-25" role="search">
                <input class="form-control me-2" type="search" placeholder="¬øQu√© estas buscando?" aria-label="Search" />
                <button class="btn btn-outline-secondary" type="submit">Buscar</button>
            </form>

            <ul class="navbar-nav my-2 my-lg-0 navbar-nav-scroll">
                <li class="nav-item me-lg-3 me-2 my-auto">
                    <span class="nav-link text-apple-secondary">üìç Ica, Per√∫</span>
                </li>

                <li class="nav-item me-lg-2 me-2 my-auto">
                    <a href="#" class="btn btn-outline-dark border-0" data-bs-toggle="modal"
                        data-bs-target="#cartModal">
                        üõí Carrito <span class="badge bg-primary ms-1">2</span>
                    </a>
                </li>

                <li class="nav-item me-2">
                    <a sec:authorize="isAnonymous()" th:href="@{/iniciar-sesion}"
                        class="btn btn-outline-primary">Iniciar sesi√≥n</a>
                </li>
                <li class="nav-item">
                    <a sec:authorize="isAnonymous()" th:href="@{/registrarse}"
                        class="btn btn-outline-primary">Registrarse</a>
                </li>

                <!-- PERFIL DESPLEGABLE -->
                <li sec:authorize="isAuthenticated()" class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle d-flex align-items-center" href="#" role="button"
                        data-bs-toggle="dropdown" aria-expanded="false">
                        <div class="rounded-circle bg-light d-flex justify-content-center align-items-center me-2"
                            style="width: 32px; height: 32px; border: 1px solid var(--border-medium);">
                            <span>üë§</span>
                        </div>
                        <span sec:authentication="principal.usuario.nombres"></span>
                    </a>
                    <ul class="dropdown-menu dropdown-menu-end shadow-sm"
                        style="min-width: 220px; border-radius: var(--radius-medium);">
                        <!-- Avatar + nombre -->
                        <li class="px-3 py-2 text-center border-bottom">
                            <div class="rounded-circle bg-light d-flex justify-content-center align-items-center mx-auto mb-2"
                                style="width: 64px; height: 64px; border: 1px solid var(--border-medium);">
                                <span class="fs-3">üë§</span>
                            </div>
                            <small sec:authentication="principal.username" class="text-lowercase">username</small> <br>
                            <small sec:authentication="principal.usuario.email" class="text-lowercase">email</small>
                        </li>
                        <!-- Opciones -->
                        <li><a class="dropdown-item" th:href="@{/mi-cuenta}">üë§ Mi cuenta</a></li>
                        <li><a class="dropdown-item" th:href="@{/mi-cuenta/pedidos}">üì¶ Mis pedidos</a></li>
                        <li>
                            <hr class="dropdown-divider">
                        </li>
                        <!-- Opciones ADMINISTRADOR -->
                        <div sec:authorize="hasAnyRole('ADMINISTRADOR', 'OWNER')" class="border-bottom">
                            <li><a class="dropdown-item" th:href="@{/admin/usuarios}">
                                    <span><i class="bi bi-database"></i></span> Usuarios</a>
                            </li>
                            <li><a class="dropdown-item" th:href="@{/admin/roles}">
                                    <span><i class="bi bi-database"></i></span> Roles</a>
                            </li>
                               <li><a class="dropdown-item" th:href="@{/admin/colores}">
                                    <span><i class="bi bi-database"></i></span> Colores</a>
                            </li>
                        </div>
                        <li><a class="dropdown-item text-danger" th:href="@{/cerrar-sesion}">Cerrar sesi√≥n</a></li>
                    </ul>
                </li>
            </ul>
        </div>
    </div>
</nav>

<!-- NAVBAR DE CATEGORIAS -->
<nav class="navbar navbar-expand-lg border-top bg-light-subtle nav-categorias nav-underline"
    th:fragment="navbarCategorias">
    <div class="container-fluid">
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#menuCategorias"
            aria-controls="menuCategorias" aria-expanded="false" aria-label="Abrir men√∫">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse justify-content-center" id="menuCategorias">
            <ul class="navbar-nav">
                <li class="nav-item"><a class="nav-link"
                        th:classappend="${currentPath == '/' or currentPath.isEmpty()} ? ' active' : ''"
                        th:href="@{/}">Inicio</a></li>
                <li class="nav-item"><a class="nav-link"
                        th:classappend="${currentPath.startsWith('/catalogo/iphones')} ? ' active' : ''"
                        th:href="@{/catalogo/iphones}">Iphones</a></li>
                <li class="nav-item"><a class="nav-link"
                        th:classappend="${currentPath.startsWith('/catalogo/relojes')} ? ' active' : ''"
                        th:href="@{/catalogo/relojes}">Relojes</a></li>
                <li class="nav-item"><a class="nav-link"
                        th:classappend="${currentPath.startsWith('/catalogo/audifonos')} ? ' active' : ''"
                        th:href="@{/catalogo/audifonos}">Audifonos</a></li>
                <li class="nav-item"><a class="nav-link"
                        th:classappend="${currentPath.startsWith('/catalogo/accesorios')} ? ' active' : ''"
                        th:href="@{/catalogo/accesorios}">Accesorios</a></li>
                <li class="nav-item"><a class="nav-link"
                        th:classappend="${currentPath.startsWith('/nosotros')} ? ' active' : ''"
                        th:href="@{/nosotros}">Nosotros</a></li>
                <li class="nav-item"><a class="nav-link"
                        th:classappend="${currentPath.startsWith('/tiendas')} ? ' active' : ''"
                        th:href="@{/tiendas}">Tiendas</a></li>
            </ul>
        </div>
    </div>
</nav>